!function(){var t=document.querySelector(".moviesT #details");if(t){var e=t.getAttribute("data-fetch-id");if(e){var n="https://script.google.com/macros/s/AKfycbxX0ysTRT9gyYjzFk5MQez7Ee0Yck4ydhKGM6zd2q0r-rTIU1X5s90DWr44NuAFTxOsDw/exec?postID="+encodeURIComponent(e);fetch(n).then(function(t){if(!t.ok)throw new Error("Network response was not ok.");return t.json()}).then(function(t){var e;if(t.error)return console.warn("⚠️ Box Office Data Not Added!"),void((e=document.querySelector(".boxOffice"))&&e.classList.add("hidden"));if(e=document.querySelector(".boxOffice")){e.classList.remove("hidden");var n=e.querySelector(".pSL");n&&n.classList.remove("hidden")}var r=t.netCollections.slice();r.sort(function(t,e){return parseInt(t.name.replace("Day","").trim(),10)-parseInt(e.name.replace("Day","").trim(),10)});var a=document.createElement("table");a.className="tableBox";var o=document.createElement("tbody");o.innerHTML="<tr><th>Day</th><th>India Net Collection</th><th>Change(+/-)</th></tr>";var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=i.indexOf(t.releaseDay);-1===l&&(l=0);for(var d,s,c,u=0,h=0,p=0,f=[],m=null,b=[],y=0;y<r.length;y++){var v=r[y],x=parseFloat(v.nettC);u+=x;var A=(l+y)%7,C=i[A];5===A||6===A||0===A?null===m?(m=x,b=[A]):(m+=x,b.push(A)):null!==m&&(b.includes(0)&&f.push(m),m=null,b=[]);var g=y+1,T=Math.floor(y/7)+1,E="Day "+g+" ["+(void 0,void 0,(d=T)+((s=["th","st","nd","rd"])[((c=d%100)-20)%10]||s[c]||s[0]))+" "+C+"]",S="NA",k="noT";if(y>0){var N=parseFloat(r[y-1].nettC),M=(x-N)/N*100;S=M.toFixed(2)+"%",k=M>0?"addT":M<0?"subT":"noT"}var w=document.createElement("tr");if(w.innerHTML="<td>"+E+"</td><td>₹ "+v.nettC+' Cr</td><td class="'+k+'">'+S+"</td>",o.appendChild(w),(y+1)%7==0){var L="NA",F="noT";if(++h>1&&0!==p){var D=(u-p)/p*100;L=(D>0?"+":"")+D.toFixed(2)+"%",F=D>0?"addT":D<0?"subT":"noT"}var H=document.createElement("tr");H.classList.add("weekUp"),H.innerHTML='<td class="weekT">Week '+h+' Collection</td><td class="weekT boxC">₹ '+u.toFixed(2)+' Cr</td><td class="'+F+'">'+L+"</td>",o.appendChild(H),p=u,u=0}}null!==m&&b.includes(0)&&f.push(m);var I=r.reduce(function(t,e){return t+parseFloat(e.nettC)},0),W=document.createElement("tr");W.className="bTbx",W.innerHTML='<td>Total Net Collection</td><td colspan="2">₹ '+I.toFixed(2)+" Cr</td>",o.appendChild(W),a.appendChild(o);var q=document.querySelector(".boxColl");if(q&&(q.innerHTML="",q.appendChild(a)),f.length>0){var z=document.createElement("table");z.className="tableBox weekND";var B=document.createElement("tbody");B.innerHTML="<tr><th>Weekend</th><th>Collections</th><th>Change(+/-)</th></tr>";var O=null;f.forEach(function(t,e){var n="NA",r="noT";if(null!==O&&0!==O){var a=(t-O)/O*100;n=(a>0?"+":"")+a.toFixed(2)+"%",r=a>0?"addT":a<0?"subT":"noT"}var o=document.createElement("tr");o.innerHTML="<td>Weekend "+(e+1)+"</td><td>₹ "+t.toFixed(2)+' Cr</td><td class="'+r+'">'+n+"</td>",B.appendChild(o),O=t}),z.appendChild(B),q&&q.appendChild(z)}var P=document.querySelector(".box-line-chart");if(P){P.innerHTML="";var R=P.offsetWidth,X={top:20,right:20,bottom:40,left:50},Y=R-X.left-X.right,j=400-X.top-X.bottom,U="http://www.w3.org/2000/svg",G=document.createElementNS(U,"svg");G.setAttribute("width",R),G.setAttribute("height",400),G.style.backgroundColor="#fff",P.appendChild(G);var K=document.createElementNS(U,"g");K.setAttribute("transform","translate("+X.left+","+X.top+")"),G.appendChild(K);var Q=r.map(function(t,e){return{day:e+1,value:parseFloat(t.nettC)}}),J=function(t){return(t-1)*(Y/(Q.length-1))},V=Math.max.apply(null,Q.map(function(t){return t.value}))/5,Z=Math.floor(Math.log10(V)),$=Math.pow(10,Z),_=V/$,tt=(_<=1?1:_<=2?2:_<=5?5:10)*$,et=5*tt,nt=function(t){return j-t/et*j},rt=document.createElementNS(U,"line");rt.setAttribute("x1",0),rt.setAttribute("y1",j),rt.setAttribute("x2",Y),rt.setAttribute("y2",j),rt.setAttribute("stroke","#000"),K.appendChild(rt);var at=document.createElementNS(U,"line");at.setAttribute("x1",0),at.setAttribute("y1",0),at.setAttribute("x2",0),at.setAttribute("y2",j),at.setAttribute("stroke","#000"),K.appendChild(at);var ot=document.createElementNS(U,"text");ot.setAttribute("x",Y/2),ot.setAttribute("y",j+X.bottom-5),ot.setAttribute("text-anchor","middle"),ot.setAttribute("font-size","12px"),ot.textContent="Days",K.appendChild(ot);var it=document.createElementNS(U,"text");it.setAttribute("text-anchor","middle"),it.setAttribute("font-size","12px"),it.setAttribute("transform","translate("+(15-X.left)+","+j/2+") rotate(-90)"),it.textContent="Money",K.appendChild(it);var lt=document.createElementNS(U,"polyline"),dt=Q.map(function(t){return J(t.day)+","+nt(t.value)}).join(" ");lt.setAttribute("points",dt),lt.setAttribute("fill","none"),lt.setAttribute("stroke","#f97316"),lt.setAttribute("stroke-width","2"),K.appendChild(lt);[1,5,10,15,20,25,30,35,40,45,50].forEach(function(t){if(t<=Q.length){var e=J(t),n=document.createElementNS(U,"line");n.setAttribute("x1",e),n.setAttribute("y1",j),n.setAttribute("x2",e),n.setAttribute("y2",j+5),n.setAttribute("stroke","#000"),K.appendChild(n);var r=document.createElementNS(U,"text");r.setAttribute("x",e),r.setAttribute("y",j+18),r.setAttribute("text-anchor","middle"),r.setAttribute("font-size","10px"),r.textContent=t,K.appendChild(r)}});for(var st=0;st<=et;st+=tt){var ct=j-st/et*j,ut=document.createElementNS(U,"line");ut.setAttribute("x1",-5),ut.setAttribute("y1",ct),ut.setAttribute("x2",0),ut.setAttribute("y2",ct),ut.setAttribute("stroke","#000"),K.appendChild(ut);var ht=document.createElementNS(U,"text");ht.setAttribute("x",-10),ht.setAttribute("y",ct+4),ht.setAttribute("text-anchor","end"),ht.setAttribute("font-size","10px"),ht.textContent=st,K.appendChild(ht)}var pt=document.querySelector(".box-line-chart"),ft=document.createElement("div");ft.style.position="absolute",ft.style.background="rgba(0,0,0,0.7)",ft.style.color="#fff",ft.style.padding="5px",ft.style.borderRadius="3px",ft.style.fontSize="12px",ft.style.pointerEvents="none",ft.style.display="none",ft.style.transition="opacity 0.2s ease",ft.style.opacity="0",ft.style.minHeight="auto",ft.style.zIndex="1000",ft.style.willChange="transform",pt.appendChild(ft);let t=null,e=!1;Q.forEach(function(n){var r=J(n.day),a=nt(n.value),o=document.createElementNS(U,"circle");function i(r){clearTimeout(t),ft.innerHTML="Day "+n.day+": ₹ "+n.value+" Cr",ft.style.display="block",ft.style.opacity="1",d(r),e=!0}function l(){t=setTimeout(function(){ft.style.opacity="0",ft.style.display="none",e=!1},100)}function d(t){var e=ft.offsetWidth,n=ft.offsetHeight,r=pt.getBoundingClientRect(),a=t.clientX-r.left+10,o=t.clientY-r.top-n-10;a+e>pt.clientWidth&&(a=t.clientX-r.left-e-10),o<0&&(o=t.clientY-r.top+10),ft.style.left=a+"px",ft.style.top=o+"px"}o.setAttribute("cx",r),o.setAttribute("cy",a),o.setAttribute("r","4"),o.setAttribute("fill","#f97316"),K.appendChild(o),o.addEventListener("mouseenter",i),o.addEventListener("mousemove",d),o.addEventListener("mouseleave",l),o.addEventListener("touchstart",function(t){t.preventDefault(),e?l():i(t.touches[0])}),o.addEventListener("click",function(t){i(t)})})}var mt=document.querySelector(".rBoxCGraph");if(mt){mt.innerHTML="";var bt=document.createElement("canvas");bt.width=100,bt.height=100,mt.appendChild(bt);var yt=bt.getContext("2d"),vt=bt.width/2,xt=bt.height/2,At=-Math.PI/2,Ct=t.budget.match(/[\d\.]+/),gt=Ct?parseFloat(Ct[0]):0,Tt=t.boxOffice.match(/[\d\.]+/),Et=Tt?parseFloat(Tt[0]):0,St=gt>0?Et/gt*100:0;St>100&&(St=100);var kt=At+St/100*2*Math.PI;yt.beginPath(),yt.arc(vt,xt,40,0,2*Math.PI),yt.strokeStyle="#f1f3f4",yt.lineWidth=10,yt.stroke(),yt.beginPath(),yt.arc(vt,xt,40,At,kt),yt.strokeStyle="#f97316",yt.lineWidth=10,yt.stroke(),yt.font="16px Arial",yt.fillStyle="#212121",yt.textAlign="center",yt.textBaseline="middle",yt.fillText(Math.round(St)+"%",vt,xt)}function Nt(t,e){var n=document.getElementById(t);n&&n.setAttribute("data-text",e)}Nt("box-budget",t.budget),Nt("box-gross",t.gross),Nt("box-office-final",t.boxOffice),Nt("box-verdict",t.verdict)}).catch(function(t){console.error("Fetch error:",t)})}else console.error("❌ No data-fetch-id set on #details")}}();
