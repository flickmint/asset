!function(){const t=document.querySelector(".moviesT #details");if(!t)return;const e=t.getAttribute("data-fetch-id");e?fetch("https://raw.githubusercontent.com/flickmint/post-boxoffice/refs/heads/main/boxoffice-data.json").then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{const n=t.find(t=>t.PostID===e);if(!n){const t=document.querySelector(".boxOffice");return void(t&&t.classList.add("hidden"))}const o=document.querySelector(".boxOffice");if(o){o.classList.remove("hidden");const t=o.querySelector(".pSL");t&&t.classList.remove("hidden")}const s=JSON.parse(n["Net Collections"]);s.sort((t,e)=>{return+t.name.replace("Day","").trim()-+e.name.replace("Day","").trim()});const r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];let i=r.indexOf(n["Release Day"]);-1===i&&(i=0);let d=0,l=0,a=0;const c=[];let u=null,h=[];const p=document.createElement("tbody");p.innerHTML="<tr><th>Day</th><th>India Net Collection</th><th>Change(+/-)</th></tr>",s.forEach((t,e)=>{const n=parseFloat(t.nettC);d+=n;const o=(i+e)%7;[5,6,0].includes(o)?(u=(u||0)+n,h.push(o)):null!==u&&(h.includes(0)&&c.push(u),u=null,h=[]);const m=e+1,f=`Day ${m} [${function(t){const e=["th","st","nd","rd"],n=t%100;return t+(e[(n-20)%10]||e[n]||e[0])}(Math.floor(e/7)+1)} ${r[o]}]`;let b="NA",x="noT";if(e>0){const t=parseFloat(s[e-1].nettC),o=(n-t)/t*100;b=o.toFixed(2)+"%",x=o>0?"addT":o<0?"subT":"noT"}const y=document.createElement("tr");if(y.innerHTML=`<td>${f}</td><td>₹ ${t.nettC} Cr</td><td class="${x}">${b}</td>`,p.appendChild(y),m%7==0){let t="NA",e="noT";if(++l>1&&0!==a){const n=(d-a)/a*100;t=(n>0?"+":"")+n.toFixed(2)+"%",e=n>0?"addT":n<0?"subT":"noT"}const n=document.createElement("tr");n.classList.add("weekUp"),n.innerHTML=`<td class="weekT">Week ${l} Collection</td><td class="weekT boxC">₹ ${d.toFixed(2)} Cr</td><td class="${e}">${t}</td>`,p.appendChild(n),a=d,d=0}}),null!==u&&h.includes(0)&&c.push(u);const m=s.reduce((t,e)=>t+parseFloat(e.nettC),0),f=document.createElement("tr");f.className="bTbx",f.innerHTML=`<td>Total Net Collection</td><td colspan="2">₹ ${m.toFixed(2)} Cr</td>`,p.appendChild(f);const b=document.createElement("table");b.className="tableBox",b.appendChild(p);const x=document.querySelector(".boxColl");if(x&&(x.innerHTML="",x.appendChild(b)),c.length){const t=document.createElement("table");t.className="tableBox weekND";const e=document.createElement("tbody");e.innerHTML="<tr><th>Weekend</th><th>Collections</th><th>Change(+/-)</th></tr>";let n=null;c.forEach((t,o)=>{let s="NA",r="noT";if(null!==n&&0!==n){const e=(t-n)/n*100;s=(e>0?"+":"")+e.toFixed(2)+"%",r=e>0?"addT":e<0?"subT":"noT"}const i=document.createElement("tr");i.innerHTML=`<td>Weekend ${o+1}</td><td>₹ ${t.toFixed(2)} Cr</td><td class="${r}">${s}</td>`,e.appendChild(i),n=t}),t.appendChild(e),x&&x.appendChild(t)}const y=document.querySelector(".box-line-chart");if(y){y.innerHTML="";const t=y.offsetWidth,e=400,n={top:20,right:20,bottom:40,left:50},o=t-n.left-n.right,r=e-n.top-n.bottom,i="http://www.w3.org/2000/svg",d=document.createElementNS(i,"svg");d.setAttribute("width",t),d.setAttribute("height",e),d.style.backgroundColor="#fff",y.appendChild(d);const l=document.createElementNS(i,"g");l.setAttribute("transform",`translate(${n.left},${n.top})`),d.appendChild(l);const a=s.map((t,e)=>({day:e+1,value:parseFloat(t.nettC)})),c=t=>(t-1)*(o/(a.length-1)),u=Math.max(...a.map(t=>t.value))/5,h=Math.floor(Math.log10(u)),p=Math.pow(10,h),m=u/p;let f;const b=(f=m<=1?1:m<=2?2:m<=5?5:10)*p,x=5*b,A=t=>r-t/x*r,C=document.createElementNS(i,"line");C.setAttribute("x1",0),C.setAttribute("y1",r),C.setAttribute("x2",o),C.setAttribute("y2",r),C.setAttribute("stroke","#000"),l.appendChild(C);const E=document.createElementNS(i,"line");E.setAttribute("x1",0),E.setAttribute("y1",0),E.setAttribute("x2",0),E.setAttribute("y2",r),E.setAttribute("stroke","#000"),l.appendChild(E);const g=document.createElementNS(i,"text");g.setAttribute("x",o/2),g.setAttribute("y",r+n.bottom-5),g.setAttribute("text-anchor","middle"),g.setAttribute("font-size","12px"),g.textContent="Days",l.appendChild(g);const T=document.createElementNS(i,"text");T.setAttribute("text-anchor","middle"),T.setAttribute("font-size","12px"),T.setAttribute("transform",`translate(${15-n.left},${r/2}) rotate(-90)`),T.textContent="Money",l.appendChild(T);const S=document.createElementNS(i,"polyline"),k=a.map(t=>`${c(t.day)},${A(t.value)}`).join(" ");S.setAttribute("points",k),S.setAttribute("fill","none"),S.setAttribute("stroke","#f97316"),S.setAttribute("stroke-width","2"),l.appendChild(S),[1,5,10,15,20,25,30,35,40,45,50].forEach(t=>{if(t<=a.length){const e=c(t),n=document.createElementNS(i,"line");n.setAttribute("x1",e),n.setAttribute("y1",r),n.setAttribute("x2",e),n.setAttribute("y2",r+5),n.setAttribute("stroke","#000"),l.appendChild(n);const o=document.createElementNS(i,"text");o.setAttribute("x",e),o.setAttribute("y",r+18),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size","10px"),o.textContent=t,l.appendChild(o)}});for(let t=0;t<=x;t+=b){const e=r-t/x*r,n=document.createElementNS(i,"line");n.setAttribute("x1",-5),n.setAttribute("y1",e),n.setAttribute("x2",0),n.setAttribute("y2",e),n.setAttribute("stroke","#000"),l.appendChild(n);const o=document.createElementNS(i,"text");o.setAttribute("x",-10),o.setAttribute("y",e+4),o.setAttribute("text-anchor","end"),o.setAttribute("font-size","10px"),o.textContent=t,l.appendChild(o)}const N=y,$=document.createElement("div");Object.assign($.style,{position:"absolute",background:"rgba(0,0,0,0.7)",color:"#fff",padding:"5px",borderRadius:"3px",fontSize:"12px",pointerEvents:"none",display:"none",opacity:"0",transition:"opacity 0.2s ease",zIndex:"1000",willChange:"transform"}),N.appendChild($);let v=null,M=!1;a.forEach(t=>{const e=c(t.day),n=A(t.value),o=document.createElementNS(i,"circle");function s(t){const e=$.offsetWidth,n=$.offsetHeight,o=N.getBoundingClientRect();let s=t.clientX-o.left+10,r=t.clientY-o.top-n-10;s+e>N.clientWidth&&(s=t.clientX-o.left-e-10),r<0&&(r=t.clientY-o.top+10),$.style.left=s+"px",$.style.top=r+"px"}function r(e){clearTimeout(v),$.innerHTML=`Day ${t.day}: ₹ ${t.value} Cr`,$.style.display="block",$.style.opacity="1",s(e.touches?e.touches[0]:e),M=!0}function d(){v=setTimeout(()=>{$.style.opacity="0",$.style.display="none",M=!1},100)}o.setAttribute("cx",e),o.setAttribute("cy",n),o.setAttribute("r","4"),o.setAttribute("fill","#f97316"),l.appendChild(o),o.addEventListener("mouseenter",r),o.addEventListener("mousemove",s),o.addEventListener("mouseleave",d),o.addEventListener("touchstart",t=>{t.preventDefault(),M?d():r(t)}),o.addEventListener("click",r)})}const A=document.querySelector(".rBoxCGraph");if(A){A.innerHTML="";const t=document.createElement("canvas");t.width=100,t.height=100,A.appendChild(t);const e=t.getContext("2d"),o=t=>{const e=t.match(/[\d\.]+/);return e?parseFloat(e[0]):0},s=o(n.Budget),r=o(n["Box Office"]);let i=s>0?r/s*100:0;i=Math.min(i,100);const d=-Math.PI/2,l=d+i/100*2*Math.PI;e.beginPath(),e.arc(50,50,40,0,2*Math.PI),e.strokeStyle="#f1f3f4",e.lineWidth=10,e.stroke(),e.beginPath(),e.arc(50,50,40,d,l),e.strokeStyle="#f97316",e.lineWidth=10,e.stroke(),e.font="16px Arial",e.fillStyle="#212121",e.textAlign="center",e.textBaseline="middle",e.fillText(Math.round(i)+"%",50,50)}[["box-budget",n.Budget],["box-gross",n.Gross],["box-office-final",n["Box Office"]],["box-verdict",n.Verdict]].forEach(([t,e])=>{const n=document.getElementById(t);n&&n.setAttribute("data-text",e)})}).catch(t=>{console.error("Fetch error:",t)}):console.error("No data-fetch-id set on #details")}();
