!function(){var t=document.querySelector(".moviesT #details");if(t){var e=t.getAttribute("data-fetch-id");if(e){var n="https://script.google.com/macros/s/AKfycbxX0ysTRT9gyYjzFk5MQez7Ee0Yck4ydhKGM6zd2q0r-rTIU1X5s90DWr44NuAFTxOsDw/exec?postID="+encodeURIComponent(e);fetch(n).then((function(t){if(!t.ok)throw new Error("Network response was not ok.");return t.json()})).then((function(t){var e;if(t.error)return console.warn("⚠️ Box Office Data Not Added!"),void((e=document.querySelector(".boxOffice"))&&e.classList.add("hidden"));if(e=document.querySelector(".boxOffice")){e.classList.remove("hidden");var n=e.querySelector(".pSL");n&&n.classList.remove("hidden")}var r=t.netCollections.slice();r.sort((function(t,e){return parseInt(t.name.replace("Day","").trim(),10)-parseInt(e.name.replace("Day","").trim(),10)}));var a=document.createElement("table");a.className="tableBox";var i=document.createElement("tbody");i.innerHTML="<tr><th>Day</th><th>India Net Collection</th><th>Change(+/-)</th></tr>";var o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=o.indexOf(t.releaseDay);-1===l&&(l=0);for(var d,s,c,u=0,h=0,p=0,f=[],m=null,b=[],y=0;y<r.length;y++){var v=r[y],x=parseFloat(v.nettC);u+=x;var A=(l+y)%7,C=o[A];5===A||6===A||0===A?null===m?(m=x,b=[A]):(m+=x,b.push(A)):null!==m&&(b.includes(0)&&f.push(m),m=null,b=[]);var g=y+1,T=Math.floor(y/7)+1,E="Day "+g+" ["+(s=void 0,c=void 0,(d=T)+((s=["th","st","nd","rd"])[((c=d%100)-20)%10]||s[c]||s[0])+" ")+C+"]",S="NA",k="noT";if(y>0){var N=parseFloat(r[y-1].nettC),M=(x-N)/N*100;S=M.toFixed(2)+"%",k=M>0?"addT":M<0?"subT":"noT"}var L=document.createElement("tr");if(L.innerHTML="<td>"+E+"</td><td>₹ "+v.nettC+' Cr</td><td class="'+k+'">'+S+"</td>",i.appendChild(L),(y+1)%7==0){var w="NA",F="noT";if(++h>1&&0!==p){var D=(u-p)/p*100;w=(D>0?"+":"")+D.toFixed(2)+"%",F=D>0?"addT":D<0?"subT":"noT"}var H=document.createElement("tr");H.classList.add("weekUp"),H.innerHTML='<td class="weekT">Week '+h+' Collection</td><td class="weekT boxC">₹ '+u.toFixed(2)+' Cr</td><td class="'+F+'">'+w+"</td>",i.appendChild(H),p=u,u=0}}null!==m&&b.includes(0)&&f.push(m);var I=r.reduce((function(t,e){return t+parseFloat(e.nettC)}),0),W=document.createElement("tr");W.className="bTbx",W.innerHTML='<td>Total Net Collection</td><td colspan="2">₹ '+I.toFixed(2)+" Cr</td>",i.appendChild(W),a.appendChild(i);var q=document.querySelector(".boxColl");if(q&&(q.innerHTML="",q.appendChild(a)),f.length>0){var z=document.createElement("table");z.className="tableBox weekND";var B=document.createElement("tbody");B.innerHTML="<tr><th>Weekend</th><th>Collections</th><th>Change(+/-)</th></tr>";var O=null;f.forEach((function(t,e){var n="NA",r="noT";if(null!==O&&0!==O){var a=(t-O)/O*100;n=(a>0?"+":"")+a.toFixed(2)+"%",r=a>0?"addT":a<0?"subT":"noT"}var i=document.createElement("tr");i.innerHTML="<td>Weekend "+(e+1)+"</td><td>₹ "+t.toFixed(2)+' Cr</td><td class="'+r+'">'+n+"</td>",B.appendChild(i),O=t})),z.appendChild(B),q&&q.appendChild(z)}var P=document.querySelector(".box-line-chart");if(P){P.innerHTML="";var R=P.offsetWidth,X={top:20,right:20,bottom:40,left:50},Y=R-X.left-X.right,j=400-X.top-X.bottom,U="http://www.w3.org/2000/svg",G=document.createElementNS(U,"svg");G.setAttribute("width",R),G.setAttribute("height",400),G.style.backgroundColor="#fff",P.appendChild(G);var K=document.createElementNS(U,"g");K.setAttribute("transform","translate("+X.left+","+X.top+")"),G.appendChild(K);var Q,J,V=r.map((function(t,e){return{day:e+1,value:parseFloat(t.nettC)}})),Z=function(t){return(t-1)*(Y/(V.length-1))},$=Math.max.apply(null,V.map((function(t){return t.value})));$<=50?(Q=50,J=10):$<=80?(Q=80,J=15):$<=100?(Q=100,J=20):$<=150?(Q=150,J=25):$<=200?(Q=200,J=30):(J=Math.ceil($/7),Q=7*J);var _=function(t){return j-t/Q*j},tt=document.createElementNS(U,"line");tt.setAttribute("x1",0),tt.setAttribute("y1",j),tt.setAttribute("x2",Y),tt.setAttribute("y2",j),tt.setAttribute("stroke","#000"),K.appendChild(tt);var et=document.createElementNS(U,"line");et.setAttribute("x1",0),et.setAttribute("y1",0),et.setAttribute("x2",0),et.setAttribute("y2",j),et.setAttribute("stroke","#000"),K.appendChild(et);var nt=document.createElementNS(U,"text");nt.setAttribute("x",Y/2),nt.setAttribute("y",j+X.bottom-5),nt.setAttribute("text-anchor","middle"),nt.setAttribute("font-size","12px"),nt.textContent="Days",K.appendChild(nt);var rt=document.createElementNS(U,"text");rt.setAttribute("text-anchor","middle"),rt.setAttribute("font-size","12px"),rt.setAttribute("transform","translate("+(15-X.left)+","+j/2+") rotate(-90)"),rt.textContent="Money",K.appendChild(rt);var at=document.createElementNS(U,"polyline"),it=V.map((function(t){return Z(t.day)+","+_(t.value)})).join(" ");at.setAttribute("points",it),at.setAttribute("fill","none"),at.setAttribute("stroke","#f97316"),at.setAttribute("stroke-width","2"),K.appendChild(at);[1,5,10,15,20,25,30,35,40,45,50].forEach((function(t){if(t<=V.length){var e=Z(t),n=document.createElementNS(U,"line");n.setAttribute("x1",e),n.setAttribute("y1",j),n.setAttribute("x2",e),n.setAttribute("y2",j+5),n.setAttribute("stroke","#000"),K.appendChild(n);var r=document.createElementNS(U,"text");r.setAttribute("x",e),r.setAttribute("y",j+18),r.setAttribute("text-anchor","middle"),r.setAttribute("font-size","10px"),r.textContent=t,K.appendChild(r)}}));for(var ot=0;ot<=Q;ot+=J){var lt=j-ot/Q*j,dt=document.createElementNS(U,"line");dt.setAttribute("x1",-5),dt.setAttribute("y1",lt),dt.setAttribute("x2",0),dt.setAttribute("y2",lt),dt.setAttribute("stroke","#000"),K.appendChild(dt);var st=document.createElementNS(U,"text");st.setAttribute("x",-10),st.setAttribute("y",lt+4),st.setAttribute("text-anchor","end"),st.setAttribute("font-size","10px"),st.textContent=ot,K.appendChild(st)}var ct=document.querySelector(".box-line-chart"),ut=document.createElement("div");ut.style.position="absolute",ut.style.background="rgba(0,0,0,0.7)",ut.style.color="#fff",ut.style.padding="5px",ut.style.borderRadius="3px",ut.style.fontSize="12px",ut.style.pointerEvents="none",ut.style.display="none",ut.style.transition="opacity 0.2s ease",ut.style.opacity="0",ut.style.minHeight="auto",ut.style.zIndex="1000",ut.style.willChange="transform",ct.appendChild(ut);let t=null,e=!1;V.forEach((function(n){var r=Z(n.day),a=_(n.value),i=document.createElementNS(U,"circle");function o(r){clearTimeout(t),ut.innerHTML="Day "+n.day+": ₹ "+n.value+" Cr",ut.style.display="block",ut.style.opacity="1",d(r),e=!0}function l(){t=setTimeout((function(){ut.style.opacity="0",ut.style.display="none",e=!1}),100)}function d(t){var e=ut.offsetWidth,n=ut.offsetHeight,r=ct.getBoundingClientRect(),a=t.clientX-r.left+10,i=t.clientY-r.top-n-10;a+e>ct.clientWidth&&(a=t.clientX-r.left-e-10),i<0&&(i=t.clientY-r.top+10),ut.style.left=a+"px",ut.style.top=i+"px"}i.setAttribute("cx",r),i.setAttribute("cy",a),i.setAttribute("r","4"),i.setAttribute("fill","#f97316"),K.appendChild(i),i.addEventListener("mouseenter",o),i.addEventListener("mousemove",d),i.addEventListener("mouseleave",l),i.addEventListener("touchstart",(function(t){t.preventDefault(),e?l():o(t.touches[0])})),i.addEventListener("click",(function(t){o(t)}))}))}var ht=document.querySelector(".rBoxCGraph");if(ht){ht.innerHTML="";var pt=document.createElement("canvas");pt.width=100,pt.height=100,ht.appendChild(pt);var ft=pt.getContext("2d"),mt=pt.width/2,bt=pt.height/2,yt=-Math.PI/2,vt=t.budget.match(/[\d\.]+/),xt=vt?parseFloat(vt[0]):0,At=t.boxOffice.match(/[\d\.]+/),Ct=At?parseFloat(At[0]):0,gt=xt>0?Ct/xt*100:0;gt>100&&(gt=100);var Tt=yt+gt/100*2*Math.PI;ft.beginPath(),ft.arc(mt,bt,40,0,2*Math.PI),ft.strokeStyle="#f1f3f4",ft.lineWidth=10,ft.stroke(),ft.beginPath(),ft.arc(mt,bt,40,yt,Tt),ft.strokeStyle="#f97316",ft.lineWidth=10,ft.stroke(),ft.font="16px Arial",ft.fillStyle="#212121",ft.textAlign="center",ft.textBaseline="middle",ft.fillText(Math.round(gt)+"%",mt,bt)}function Et(t,e){var n=document.getElementById(t);n&&n.setAttribute("data-text",e)}Et("box-budget",t.budget),Et("box-gross",t.gross),Et("box-office-final",t.boxOffice),Et("box-verdict",t.verdict)})).catch((function(t){console.error("Fetch error:",t)}))}else console.error("❌ No data-fetch-id set on #details")}}();
