!function(){const t=document.querySelector("[data-content-type]");if(!t)return;const e=t.getAttribute("data-content-type");if("Movie"!==e&&"Series"!==e)return;function n(t,e=document){return e.querySelector(t)||null}const r="Movie"===e?"Movie":"TVSeries",o={"@context":"http://schema.org","@type":r};let i=null;const a=document.querySelector("[data-list-item-url]");if(a)i=a.getAttribute("data-list-item-url");else{const t=window.location.href.match(/.*?\.html/);i=t?t[0]:window.location.href}i&&(o.url=i);const c=n(".hHead h1 span:not(.hYrs)");c&&(o.name=c.textContent.trim());const s=n(".imgC");if(s){const t=(s.getAttribute("data-style")||"").match(/url\(\s*(['"]?)(.*?)\1\s*\)/i);t&&t[2]&&(o.image=t[2])}const l=n(".hAge .agN");if(l&&(o.contentRating=l.textContent.trim()),"Movie"===r){const t=n(".hDur .sDur");if(t){const e=t.textContent.trim().match(/(?:(\d+)\s*hr)?\s*(?:(\d+)\s*min)?/i);if(e){const t=e[1]?parseInt(e[1],10):0,n=e[2]?parseInt(e[2],10):0;let r="PT";t>0&&(r+=t+"H"),n>0&&(r+=n+"M"),"PT"!==r&&(o.duration=r)}}}const u=n("div.pSec.abT .pCon p");u&&(o.description=u.textContent.trim());const d=document.querySelectorAll(".hLabels .labL span");if(d.length>0){const t=Array.from(d).map(t=>t.textContent.trim()).filter(Boolean);t.length>0&&(o.genre=t)}const m=n(".creDtC");if(m){const t=n(".mnTh",m),e=n(".dY",m),r=n(".yR",m);if(t&&e&&r){const n=t.getAttribute("data-text").trim(),i=e.getAttribute("data-text").trim(),a=r.getAttribute("data-text").trim(),c={January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"}[n]||"01",s=i.padStart(2,"0"),l=a;o.datePublished=`${l}-${c}-${s}`}}const g=document.querySelector("[data-fetch-id]"),f=g?g.getAttribute("data-fetch-id"):null;function h(){const t=n(".pSec.vidS");if(t){const e=t.querySelectorAll(".videoItm span[data-video-id][data-video-title]");let n=null;for(let t of e){const e=t.getAttribute("data-video-title")||"";if(/Trailer/i.test(e)){n=t;break}}if(!n)for(let t of e){const e=t.getAttribute("data-video-title")||"";if(/Teaser/i.test(e)){n=t;break}}if(n&&o.datePublished){const t=n.getAttribute("data-video-id"),e=n.getAttribute("data-video-title").trim(),r=`https://www.youtube.com/embed/${t}`,i=`https://img.youtube.com/vi/${t}/maxresdefault.jpg`,a=`${o.datePublished}T00:00:00Z`;o.trailer={"@type":"VideoObject",name:e,description:`Check out ${e}`,thumbnail:{"@type":"ImageObject",contentUrl:i},embedUrl:r,thumbnailUrl:i,url:r,uploadDate:a}}}const e=n(".genKey");if(e){const t=(e.getAttribute("data-text")||"").split(",").map(t=>t.trim()).filter(Boolean);t.length>0&&(o.keywords=t)}else o.genre&&(o.keywords=Array.isArray(o.genre)?o.genre.slice():[o.genre]);const r=n("div.pSec.acT .pCon");if(r){const t=r.querySelectorAll(".aF"),e=[];for(let n=0;n<t.length&&e.length<5;n++){const r=t[n],o=r.textContent.trim();if(o){const t=r.closest("a");t?e.push({"@type":"Person",name:o,url:t.getAttribute("href")}):e.push({"@type":"Person",name:o})}}e.length>0&&(o.actor=e)}const i=n(".conName .creCon");if(i){const t=i.getAttribute("data-text")||i.textContent.trim();t&&(o.countryOfOrigin=t.trim())}document.querySelectorAll("li.deTR").forEach(t=>{const e=t.querySelector(".deTC.name"),n=t.querySelector(".deTC:not(.name)");if(!e||!n)return;const r=e.textContent.trim();if("Production Companies"===r){const t=n.querySelector("a"),e=t?t.textContent.trim():n.textContent.trim();e&&(o.productionCompany={"@type":"Organization",name:e})}else if("Director"===r){const t=n.querySelector("a"),e=t?t.textContent.trim():n.textContent.trim();if(e){const n={"@type":"Person",name:e};t&&t.href&&(n.url=t.href),o.director=n}}else if("Background Score"===r){const t=n.querySelector("a"),e=t?t.textContent.trim():n.textContent.trim();if(e){const n={"@type":"Person",name:e};t&&t.href&&(n.url=t.href),o.musicBy=n}}}),function(t){const e=document.createElement("script");e.type="application/ld+json",e.textContent=JSON.stringify(t),document.head.appendChild(e)}(o)}f?fetch("https://raw.githubusercontent.com/flickmint/post-ratings-data/refs/heads/main/ratings-summary.json").then(t=>{if(!t.ok)throw new Error("Ratings fetch failed");return t.json()}).then(t=>{const e=t.find(t=>t.post_id===f);e&&(o.aggregateRating={"@type":"AggregateRating",ratingCount:e.total_votes,bestRating:10,worstRating:1,ratingValue:e.avg_rating})}).catch(t=>{console.warn("Could not load AggregateRating:",t)}).finally(()=>{h()}):h()}();
